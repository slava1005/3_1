## Домашнее задание к занятию «Компоненты Kubernetes»
### Задание. Необходимо определить требуемые ресурсы
Известно, что проекту нужны база данных, система кеширования, а само приложение состоит из бекенда и фронтенда. Опишите, какие ресурсы нужны, если известно:
```
Необходимо упаковать приложение в чарт для деплоя в разные окружения.
База данных должна быть отказоустойчивой. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии.
Кеш должен быть отказоустойчивый. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии.
Фронтенд обрабатывает внешние запросы быстро, отдавая статику. Потребляет не более 50 МБ ОЗУ на каждый экземпляр,
0.2 ядра. 5 копий.
Бекенд потребляет 600 МБ ОЗУ и по 1 ядру на копию. 10 копий.
```

### Выполнение задания:

Для организации высоконагруженного кластера, необходимо учитывать потребление ресурсов не только K8S master нод (Control Plane) и worker нод, 
но и потребление ресурсов операционными системами Linux.

Master Nodes (Control Plane):
Для Linux надо минимум 1 ядро и 512 Mb оперативной памяти на каждую ноду.

Для master нод вместе с операционными системами потребуются следующие ресурсы для запуска:

ОЗУ = 4 Gb * 3 ноды = 12 Gb

CPU = 2 core * 3 ноды = 6 core

Etcd — база данных для Kubernetes, критически важный компонент любого кластера. Он хранит в себе всю информацию, нужную для его стабильной работы. 
Обеспечивает отказоустойчивость, управляет конфигурацией кластера, обеспечивает доступность кластера даже при его сбоях. Etcd можно размещать как на master нодах, 
так и на отдельных нодах. Для каждой ноды Etcd нужно минимум 2 core cpu и 2 ram. Количество самих нод etcd рекомендуется делать нечетным, в количестве от трех штук.

В итоге для построения Control Plane кластера c Etcd, его управления и для поддержания его работоспособности получаем следующие системные требования:

ОЗУ = 12 Gb + 6 Gb = 18 Gb

CPU = 6 core + 6 core = 12 core

Worker Nodes:
Количество Worker нод также буду для начала использовать в размере трех штук.

Исходя из условий задачи подсчитаю расчет ресурсов для приложений:

- DB:
ОЗУ = 4 Gb * 3 ноды = 12 Gb

CPU = 1 core * 3 ноды = 3 core

- Cache:
ОЗУ = 4 Gb * 3 ноды = 12 Gb

CPU = 1 core * 3 ноды = 3 core

- Frontend:
ОЗУ = 50 Mb * 5 нод = 250 Mb

CPU = 0.2 core * 5 нод = 1 core

- Backend:
ОЗУ = 600 Mb * 10 ноды = 6 Gb

CPU = 1 core * 10 ноды = 10 core

Также к этим ресурсам нужно добавить по 1 ядру и 0.5 Gb оперативной памяти для работы операционной системы Linux.

Итоговые значения для Worker нод:

ОЗУ = 12 Gb + 1.5 Gb + 12 Gb + 1.5 Gb + 2.75 Gb + 11 Gb = 40.75 Gb

CPU = 6 core + 6 core + 6 core + 20 core = 38 core

Итоговое количество необходимой памяти и процессоров получается следующим:

ОЗУ = 58.75 Gb

CPU = 50 core

Избыточность или недостаточность конфигурации можно будет выяснить после запуска настроив систему мониторинга, с помощью которой будет возможно узнать величину потребляемых ресурсов в пике.

Также для самих подов кластера в Deployments можно будет указывать динамические значения для памяти и процессора. Пример:

      resources:
        requests:
          cpu: "0.5"
          memory: "1000Mi"
        limits:
          cpu: "1"
          memory: "1500Mi"
Это значит, что под будет для нормальной работы запрашивать 0.5 cpu и 1 Gb памяти, но при необходимости будет запрашивать 1 cpu и 1.5 Gb памяти.
